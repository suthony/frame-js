//资源池
// modelFactory = {
//     "appScope": [],
//     "pageScope": []
//     // "pages": []
// };
$={async:true,get:function(url,func){this.ajax(url,"get","",func)},post:function(url,body,func){this.ajax(url,"post",body,func)},ajax:function(url,method,body,successFunc,failFunc){var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState===4){var status=xmlhttp.status;if(status===200)successFunc(xmlhttp.responseText);else;}};xmlhttp.open(method,url,this.async);xmlhttp.send(body)}};localStorage.clear();function require(path){eval(localStorage.getItem("source://script/"+path+".js"));return module.exports}window.SMFactory={};window.MMFactory={};window.UIFactory={};var appUrls=[appPath+"source/app.js"];var doUrls=[doPath+"deviceone.js",doPath+"ui/UI.js",doPath+"ui/do_ALayout.js",doPath+"ui/do_ImageView.js",doPath+"ui/do_ListView.js",doPath+"ui/do_Button.js",doPath+"ui/do_LinearLayout.js",doPath+"ui/do_Label.js",doPath+"ui/do_TextField.js",doPath+"ui/do_TextBox.js",doPath+"ui/do_ScrollView.js",doPath+"ui/do_GridView.js",doPath+"ui/do_SwitchView.js",doPath+"ui/do_GestureView.js",doPath+"ui/do_SlideView.js",doPath+"ui/do_ViewShower.js",doPath+"ui/do_WebView.js",doPath+"sm/SM.js",doPath+"sm/do_App.js",doPath+"sm/do_Page.js",doPath+"sm/do_DataCache.js",doPath+"sm/do_Notification.js",doPath+"sm/do_Global.js",doPath+"sm/do_InitData.js",doPath+"sm/do_Camera.js",doPath+"sm/do_Album.js",doPath+"sm/do_ImageBrowser.js",doPath+"mm/MM.js",doPath+"mm/do_ListData.js",doPath+"mm/do_Animation.js",doPath+"mm/do_Animator.js",doPath+"mm/do_HashData.js",doPath+"mm/do_Http.js",doPath+"mm/do_Timer.js",doPath+"mm/do_SQLite.js",doPath+"ui/css/do_SwitchView.css"];var download_count=0;var totalDownCount=appUrls.length+doUrls.length+2;$.async=true;$.get(doPath+"base.html",function(data){localStorage.setItem("base.html",data);downLoaded()},"text");$.get(appPath+"app.doproj",function(data){var data=eval("("+data+")");var userScreenHeight=data.DesignEnvironment.ScreenHeight;var userScreenWidth=data.DesignEnvironment.ScreenWidth;var appID=data.DesignEnvironment.AppID;localStorage.setItem("userScreenHeight",userScreenHeight);localStorage.setItem("userScreenWidth",userScreenWidth);localStorage.setItem("appID",data.Base.AppID);downLoaded()},"text");for(var i=0,len=appUrls.length;i<len;++i){var url=appUrls[i];var source=url.match(/source.*(ui|js)$/g)[0];source=source.replace("source/","source://");if(localStorage.getItem(source))downLoaded();else(function(url,source){$.get(url,function(data){console.log(source);localStorage.setItem(source,data);downLoaded()},"text")})(url,source)}for(var i=0,len=doUrls.length;i<len;++i){var url=doUrls[i];var source=url.match(/[^\/]*$/g)[0];if(localStorage.getItem(source))downLoaded();else(function(url,source){$.get(url,function(data){console.log(source);localStorage.setItem(source,data);downLoaded()},"text")})(url,source)}function downLoaded(){download_count++;if(download_count===totalDownCount){console.log("\u4e0b\u8f7d\u5b8c\u6210");window.eval(localStorage.getItem("deviceone.js"));eval(localStorage.getItem("source://app.js"));require("deviceone").sm("do_App").fire("loaded")}};